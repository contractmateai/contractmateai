from IPython.display import display, HTML

html_code = """
<!-- Drag-and-drop upload zone and image preview system (client-side only) -->
<style>
  .upload-area {
    border: 2px dashed #2068c1;
    padding: 40px;
    text-align: center;
    border-radius: 12px;
    background-color: #111;
    color: #ccc;
    margin: 40px auto;
    width: 90%;
    max-width: 640px;
  }
  .upload-area.dragover {
    background-color: #222;
    border-color: #3388ff;
  }
  .preview-area {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
    margin-top: 20px;
  }
  .preview-image {
    width: 200px;
    height: auto;
    border-radius: 8px;
    border: 1px solid #444;
  }
</style>

<div class="upload-area" id="uploadArea">
  <p><strong>Drag & Drop Your Contract File or Image Here</strong></p>
  <p>or click to select (PDF, DOCX, or Images)</p>
  <input type="file" id="fileInputDrag" accept=".pdf,.doc,.docx,image/*" style="display: none;" multiple />
</div>
<div class="preview-area" id="previewArea"></div>

<script>
  const uploadArea = document.getElementById('uploadArea');
  const fileInput = document.getElementById('fileInputDrag');
  const previewArea = document.getElementById('previewArea');

  uploadArea.addEventListener('click', () => fileInput.click());

  uploadArea.addEventListener('dragover', (e) => {
    e.preventDefault();
    uploadArea.classList.add('dragover');
  });

  uploadArea.addEventListener('dragleave', () => {
    uploadArea.classList.remove('dragover');
  });

  uploadArea.addEventListener('drop', (e) => {
    e.preventDefault();
    uploadArea.classList.remove('dragover');
    handleFiles(e.dataTransfer.files);
  });

  fileInput.addEventListener('change', () => {
    handleFiles(fileInput.files);
  });

  function handleFiles(files) {
    previewArea.innerHTML = ''; // Clear previous previews
    Array.from(files).forEach(file => {
      if (file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = (e) => {
          const img = document.createElement('img');
          img.src = e.target.result;
          img.className = 'preview-image';
          previewArea.appendChild(img);
        };
        reader.readAsDataURL(file);
      } else {
        const div = document.createElement('div');
        div.textContent = "Uploaded: " + file.name;
        div.style.color = "#ccc";
        previewArea.appendChild(div);
      }
    });
  }
</script>
"""

display(HTML(html_code))

