import './styles/home.css';   // probably already present
import './scripts/homeFunctions.js';
</style>
  </head>
  <body>
    <div class="topbar-wrap" id="topbarWrap">
      <div class="topbar" id="topbar">
        <div class="topbar-left">
          <a href="index.html"><img class="topbar-logo" src="https://imgur.com/t8UWYN3.png" alt="SignSense logo" /></a>
          <a href="index.html" class="topbar-brand">SignSense</a>
        </div>
        <nav class="topbar-nav">
          <a href="https://youtube.com" target="_blank" rel="noopener noreferrer">See How It Works</a>
          <a href="index.html">Home</a>
          <a href="contact.html">Contact</a>
        </nav>
        <button class="menu-toggle" id="menuToggle" aria-label="Menu">
          <span class="bar b1"></span><span class="bar b2"></span><span class="bar b3"></span>
        </button>
      </div>
    </div>

    <div class="menu-overlay" id="menuOverlay"></div>
    <div class="menu-panel" id="menuPanel" aria-hidden="true">
      <nav class="menu-list">
        <a class="menu-item" href="https://youtube.com" target="_blank" rel="noopener">See How It Works <span class="chev">›</span></a>
        <a class="menu-item" href="index.html">Home <span class="chev">›</span></a>
        <a class="menu-item" href="contact.html">Contact <span class="chev">›</span></a>
      </nav>
      <div class="menu-disclaimer">
        <div>Not legal advice.</div>
        <div>© 2025 SignSense. All rights reserved.</div>
      </div>
    </div>

    <div class="particle-container" id="particles"></div>

    <div class="hero-wrapper">
      <section class="hero reveal-on-load">
        <div class="hero-upper">
          <div class="tagline-absolute animated-arrow-bttn">
            <span class="chip">AI</span>
            Legal DocReview Tool
            <span class="animated-arrow diag" aria-hidden="true">↗</span>
          </div>
          <!-- DESKTOP (unchanged look) -->
<h1 class="hide-on-mobile">Make Sense Of What<br /><span>You’re Signing</span></h1>

<!-- MOBILE (green on Sense/Signing) -->
<h1 class="show-on-mobile">
  <span>Make&nbsp;<span class="lime">Sense</span>&nbsp;Of&nbsp;What</span>
  <span>You’re&nbsp;<span class="lime">Signing</span></span>
</h1>





         <!-- DESKTOP (unchanged wording) -->
<p class="subtext hide-on-mobile">
  Free contract reviewing and no need at all for any account creation or sign up.
</p>

<!-- MOBILE (new wording + 2 rows) -->
<p class="subtext show-on-mobile">
  Free contract reviewing and no need for<br />
  an account creation or sign up.
</p>


        </div>
        <div id="ctaWrap" class="cta-wrapper">
          <button id="reviewBtn" class="cta-btn animated-arrow-bttn">Review A Contract <span class="animated-arrow diag" aria-hidden="true">↗</span></button>
        </div>
        <div id="rolePicker" class="role-picker" hidden>
          <span class="role-title">You are:</span>
          <div class="role-buttons">
            <button type="button" class="role-btn" data-role="signer">The Signer</button>
            <button type="button" class="role-btn" data-role="writer">The Writer</button>
          </div>
        </div>

        <!-- MOBILE-ONLY YOUTUBE placed between CTA and logo strip -->
        <div class="yt-wrap show-on-mobile">
          <div class="yt-box">
            <iframe
              src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0"
              title="SignSense video"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen></iframe>
          </div>
        </div>
      </section>

      <div class="app-container">
        <div class="app-wrapper" id="appWrapper">
          <div class="app-frame">
            <div class="glint-line" aria-hidden="true"></div>
            <img class="app-preview" src="https://i.imgur.com/slsiM6i.png" alt="App Preview" />
          </div>
        </div>
      </div>
    </div>

    <section class="logo-strip">
      <div class="logo-track" id="logoTrack"></div>
      <div class="logo-fade left"></div>
      <div class="logo-fade right"></div>
    </section>

    <div style="text-align: center; margin-top: 80px; margin-bottom: 24px">
      <div class="section-badge animated-arrow-bttn">Instant Clarity Engine <span class="animated-arrow diag" aria-hidden="true">↗</span></div>
    </div>

<!-- DESKTOP (only shows Smarter Reviews, Faster Decisions) -->
<h2 class="section-title hide-on-mobile">
  Smarter Reviews,<br />Faster Decisions
</h2>

<p class="section-sub hide-on-mobile">
  AI highlights key clauses, risks, and red flags<br />
  so you can sign smarter and with confidence.
</p>

<!-- MOBILE (Way Smarter Reviews + shorter text) -->
<h2 class="section-title show-on-mobile">
  <span class="nowrap">Way Smarter Reviews</span><br />
  <span class="nowrap"><span class="lime">Faster&nbsp;Decisions</span></span>
</h2>

<p class="section-sub show-on-mobile">
  <span class="nowrap">AI highlights, key clauses, risks</span><br />
  <span class="nowrap">red&nbsp;flags so you can sign smarter</span>
</p>





    <section class="insight-section" data-aos="fade-up">
      <div class="insight-content">
        <div class="insight-left moving-line-wrapper">
          <span class="yellow-line" id="yellowLine"></span>
          <div class="moving-line-content">
            <img src="https://i.imgur.com/a6QxhzQ.png" alt="Insights UI" />
          </div>
        </div>

        <!-- Hide on mobile (also CSS-enforced) -->
        <div class="insight-right hide-on-mobile">
          <div class="insight-icon-row">
            <img class="circle-icon" src="https://i.imgur.com/VVGvghi.png" alt="AI icon" loading="lazy" />
            <img class="circle-icon" src="https://i.imgur.com/woCjWUt.png" alt="Speed icon" loading="lazy" />
            <img class="circle-icon" src="https://i.imgur.com/0IzXvgs.png" alt="Shield/Secure icon" loading="lazy" />
          </div>
          <h2>Understand Your Contract <br /><span>Instantly with AI</span></h2>
          <p>Reveal hidden risks and key terms so you can review contracts clearly, quickly, and without confusion.</p>
          <a id="insightReviewBtn" href="https://youtube.com" target="_blank" rel="noopener noreferrer" class="cta-outline animated-arrow-bttn">Learn More <span class="animated-arrow diag" aria-hidden="true">↗</span></a>
        </div>
      </div>
    </section>

    <!-- SCROLLING FEATURES SECTION -->
    <div class="scroll-full">
      <div class="scroll-wrapper">
        <section class="scroll-section" data-aos="fade-up">
          <!-- exact 3-line layout for mobile via <br> -->
         <h3>Everything you need for clarity &amp; security in one seamless experience.</h3>

          <div class="scroll-strip top-row"></div>
          <div class="scroll-strip bottom-row"></div>
          <div class="scroll-shadow-left"></div>
          <div class="scroll-shadow-right"></div>
        </section>
      </div>
    </div>

    <section class="watch-video-section" data-aos="fade-up">
      <div class="video-content">
        <div class="video-text">
          <h2>Take a deeper look to<br />see how SignSense<br />really works.</h2>
          <p>Curious how SignSense works? Watch our video for a clear, step-by-step look at how we simplify your contracts</p>
          <a id="watchBtn" href="https://youtube.com" target="_blank" rel="noopener noreferrer" class="watch-btn animated-arrow-bttn">Watch on Channel <span class="animated-arrow diag" aria-hidden="true">↗</span></a>
        </div>
        <div class="video-box">
          <iframe class="video-embed" src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0" title="SignSense Video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
        </div>
      </div>
    </section>

    <section class="reviews-section" data-aos="fade-up">
      <div class="reviews-header">
        <div class="reviews-title">
          <h2>What <span class="green">Our Clients</span> Say</h2>
          <div class="reviews-sub">Hear Directly From Our Satisfied Users</div>
        </div>
   
      </div>

      <div class="reviews-viewport" id="reviewsViewport">
        <div class="reviews-track" id="reviewsTrack">
          <div class="review-card"><img src="https://i.imgur.com/jX2IqjQ.png" alt="Review 1" /></div>
          <div class="review-card"><img src="https://i.imgur.com/k42nv4C.png" alt="Review 2" /></div>
          <div class="review-card"><img src="https://i.imgur.com/6M6XO2l.png" alt="Review 3" /></div>
          <div class="review-card"><img src="https://i.imgur.com/YMDEKZm.png" alt="Review 4" /></div>
          <div class="review-card"><img src="https://i.imgur.com/I9iQu88.png" alt="Review 5" /></div>
        </div>
      </div>

      <div class="review-dots" id="reviewDots"></div>

      <div class="leave-review-wrap">
        <a class="leave-review animated-arrow-bttn" href="https://tally.so/r/3EGJpA" target="_blank" rel="noopener noreferrer">Leave A Review <span class="animated-arrow diag" aria-hidden="true">↗</span></a>
      </div>
    </section>

    <section class="faq-section" data-aos="fade-up">
      <h2 class="faq-title">Frequently Asked Questions</h2>
      <div class="faq-list">
        <div class="faq-item">
          <button class="faq-q" type="button">
            <span>What languages do you support?</span>
            <svg class="chev" viewBox="0 0 24 24" width="26" height="26"><path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
          <div class="faq-a">We support English, Spanish, German, French, Italian, Portuguese, Dutch, Romanian, Albanian, Chinese, Japanese, and Turkish. More coming soon!</div>
        </div>
        <div class="faq-item">

          <button class="faq-q" type="button">
            <span>Is SignSense legally binding or a replacement for a lawyer?</span>
            <svg class="chev" viewBox="0 0 24 24" width="26" height="26"><path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
          <div class="faq-a">No. SignSense explains your contract using AI, but it isn’t legally binding and doesn’t replace professional legal advice.</div>
        </div>
        <div class="faq-item">
          <button class="faq-q" type="button">
            <span>What types of contracts can I upload?</span>
            <svg class="chev" viewBox="0 0 24 24" width="26" height="26"><path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
          <div class="faq-a">Most standard agreements—leases, NDAs, freelance/service contracts, employment offers, and more.</div>
        </div>
        <div class="faq-item">
          <button class="faq-q" type="button">
            <span>Is my data secure when I upload a contract?</span>
            <svg class="chev" viewBox="0 0 24 24" width="26" height="26"><path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
          </button>
          <div class="faq-a">Yes. Uploads are processed securely; we don’t sell your data or share your files with third parties.</div>
        </div>
      </div>
    </section>

<!-- DESKTOP FOOTER -->
<div class="site-footer-wrap desktop-only">
<footer class="site-footer desktop-only">

    <div class="footer-left">
      <a href="index.html">
        <img class="footer-logo" src="https://imgur.com/BcUqgKZ.png" alt="SignSense logo" />
      </a>
      <div class="footer-left-inner">
        <a href="index.html" class="footer-brand">SignSense</a>
        <div class="footer-tagline">
          <div>No confusion, no legal jargon.</div>
          <div>For informational use only. Not legal advice.</div>
        </div>
      </div>
    </div>

    <div class="footer-col">
      <div class="footer-title">Quick Menu</div>
      <nav class="footer-links">
        <a href="https://youtube.com" target="_blank" rel="noopener noreferrer">How it Works</a>
        <a href="https://tally.so/r/3EGJpA" target="_blank" rel="noopener noreferrer">Leave Review</a>
      </nav>
    </div>

    <div class="footer-col">
      <div class="footer-title">Information</div>
      <nav class="footer-links">
        <a href="contact.html">Contact</a>
        <a href="index.html">Home</a>
      </nav>
    </div>

    <div class="footer-col">
      <div class="footer-title">Socials</div>
      <nav class="footer-links">
        <a href="https://instagram.com" target="_blank" rel="noopener noreferrer">Instagram</a>
        <a href="https://youtube.com" target="_blank" rel="noopener noreferrer">YouTube</a>
        <a href="https://x.com" target="_blank" rel="noopener noreferrer">X</a>
      </nav>
    </div>
  </footer>

  <div class="footer-bottom">
    <div class="footer-divider"></div>
    <div class="footer-bottom-links">
      <a href="privacy.html">Privacy Policy</a>
      <a href="terms.html">Terms of Service</a>
      <a href="cookies.html">Cookie Policy</a>
      <span class="footer-copy">© 2025 SignSense. All rights reserved.</span>
    </div>
  </div>
</div>





    <!-- Simple mobile footer (shown on mobile only by CSS) -->
<footer class="site-footer-mobile">
  <div class="footer-wrap">
    <div class="footer-brandrow">
      <div class="footer-logo">
        <img src="https://imgur.com/t8UWYN3.png" alt="SignSense logo" />
        <span>SignSense</span>
      </div>
      <div class="footer-copy">© 2025 SignSense. All rights reserved.</div>
      <div class="footer-disclaimer">For informational use only. Not legal advice.</div>
    </div>
    <div class="footer-socials">
      <a class="social-btn" href="https://x.com" target="_blank" rel="noopener" aria-label="X">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M18.244 2H21l-6.52 7.45L22.5 22h-6.73l-4.7-6.35L5.6 22H3l7.07-8.07L1.5 2h6.8l4.22 5.8L18.244 2Zm-1.18 18h1.77L8.05 4h-1.8l10.82 16Z"/></svg>
      </a>
      <a class="social-btn" href="https://facebook.com" target="_blank" rel="noopener" aria-label="Facebook">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M22 12.07C22 6.52 17.52 2 12 2S2 6.52 2 12.07c0 5.02 3.66 9.19 8.44 9.93v-7.03H7.9V12.1h2.54V9.79c0-2.5 1.49-3.88 3.77-3.88 1.09 0 2.24.2 2.24.2v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.87h2.78l-.44 2.87h-2.34V22c4.78-.74 8.44-4.91 8.44-9.93Z"/></svg>
      </a>
      <a class="social-btn" href="https://www.instagram.com/signsense.io/" target="_blank" rel="noopener" aria-label="Instagram">
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5Zm0 2a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3H7Zm5 3.5a5.5 5.5 0 1 1 0 11.001 5.5 5.5 0 0 1 0-11Zm0 2a3.5 3.5 0 1 0 .001 7.001A3.5 3.5 0 0 0 12 9.5Zm5.25-2.25a1 1 0 1 1 0 2.001 1 1 0 0 1 0-2Z"/></svg>
      </a>
    </div>
    <div class="footer-cols">
      <div class="footer-col">
        <h4>Help</h4>
        <a class="footer-link" href="contact.html">Contact us</a>
        <a class="footer-link" href="https://youtube.com" target="_blank" rel="noopener">How it Works</a>
      </div>
      <div class="footer-col">
        <h4>Product</h4>
        <a class="footer-link" href="https://tally.so/r/3EGJpA" target="_blank" rel="noopener">Leave Review</a>
      </div>
      <div class="footer-col">
        <h4>Legal</h4>
        <a class="footer-link" href="terms.html">Terms of Service</a>
        <a class="footer-link" href="privacy.html">Privacy Policy</a>
        <a class="footer-link" href="cookies.html">Cookie Policy</a>
      </div>
    </div>
    <div class="footer-bottom-space"></div>
  </div>
</footer>


    <!-- Upload inputs -->
 <input id="contractFile" type="file" multiple accept=".pdf,.doc,.docx,.txt,.png,.jpg,.jpeg,image/*" style="display: none" />


   <input id="contractCamera" type="file" accept="image/*" capture="environment" style="display:none" />


    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
      AOS.init({ once: true });
      document.addEventListener('DOMContentLoaded', () => {
        const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        document.body.classList.add('stage1');
        if (reduce) { document.body.classList.add('stage2','stage3'); return; }
        setTimeout(() => document.body.classList.add('stage2'), 80);
        setTimeout(() => document.body.classList.add('stage3'), 160);
      });

      // particles
      const container = document.getElementById("particles");
      if (container) {
        const num = 50;
        for (let i = 0; i < num; i++) {
          const p = document.createElement("div");
          p.className = "particle";
          const duration = 25 + Math.random() * 15;
          const size = 1 + Math.random() * 2.5;
          p.style.left = `${Math.random() * window.innerWidth}px`;
          p.style.top = `${Math.random() * 1600}px`;
          p.style.width = `${size}px`;
          p.style.height = `${size}px`;
          p.style.animationDuration = `${duration}s`;
          container.appendChild(p);
        }
      }

      // tilt
      const wrapper = document.getElementById("appWrapper");
      if (wrapper) {
        window.addEventListener("scroll", () => {
          const st = window.scrollY;
          wrapper.style.transform = st > 50 ? "rotateX(0deg)" : "rotateX(12deg)";
        }, { passive: true });
      }

      // feature rows
      const topRow = document.querySelector(".top-row");
      const bottomRow = document.querySelector(".bottom-row");
      const featuresTop = [
        { label: "No Signup", icon: "https://imgur.com/dKG0KXh.png" },
        { label: "Secure Processing", icon: "https://imgur.com/Cbflaz5.png" },
        { label: "PDF Export", icon: "https://imgur.com/RozMHbN.png" },
        { label: "Risk Indicator", icon: "https://imgur.com/hDBmbBP.png" },
        { label: "Your Data Stays Yours", icon: "https://imgur.com/SaW85D2.png" },
        { label: "Smart Summary", icon: "https://imgur.com/dPCWJg7.png" },
        { label: "Language Detection", icon: "https://imgur.com/Xv2u5Mz.png" },
        { label: "Key Clauses", icon: "https://imgur.com/cv1DrX1.png" },
      ];
      const featuresBottom = [
        { label: "Legal Insights", icon: "https://imgur.com/0TgzL8P.png" },
        { label: "Suggestions Engine", icon: "https://imgur.com/JMV0gKS.png" },
        { label: "Clause Warnings", icon: "https://imgur.com/MAZkZHs.png" },
        { label: "AI Review", icon: "https://imgur.com/o8K46Sk.png" },
        { label: "No legal jargon", icon: "https://imgur.com/3PU7xU0.png" },
        { label: "Deadline Pressure", icon: "https://imgur.com/rlaNjHT.png" },
        { label: "Modern Design", icon: "https://imgur.com/Ie8CwXO.png" },
        { label: "Confidence to Sign", icon: "https://imgur.com/5DGepME.png" },
      ];
      function populateRow(row, features) {
        if (!row) return;
        const makeSet = () => {
          const frag = document.createDocumentFragment();
          features.forEach((f) => {
            const el = document.createElement("div");
            el.className = "scroll-item";
            el.innerHTML = `<img src="${f.icon}" alt="" loading="lazy"><span>${f.label}</span>`;
            frag.appendChild(el);
          });
          return frag;
        };
        row.appendChild(makeSet());
        row.appendChild(makeSet());
      }
      populateRow(topRow, featuresTop);
      populateRow(bottomRow, featuresBottom);
      function makeTicker(row, { pxPerSecond = 36, direction = "left" } = {}) {
        if (!row) return;
        const speed = direction === "left" ? -pxPerSecond : pxPerSecond;
        let x = 0, w = 0, raf = 0, last = performance.now();
        function measure(){ w = row.scrollWidth / 2; if(!w){ setTimeout(measure,60); } }
        function tick(now) {
          const dt = (now - last) / 1000; last = now;
          x += speed * dt;
          if (x <= -w) x += w; if (x > 0) x -= w;
          row.style.transform = `translateX(${x}px)`; raf = requestAnimationFrame(tick);
        }
        const media = window.matchMedia("(prefers-reduced-motion: reduce)");
        function start() { if (media.matches) { row.style.transform = "none"; return; } measure(); last = performance.now(); raf = requestAnimationFrame(tick); }
        function stop(){ if (raf) cancelAnimationFrame(raf); }
        window.addEventListener("resize", measure, { passive: true });
        media.addEventListener?.("change", () => { stop(); start(); });
        start();
      }
      window.addEventListener("load", () => {
        makeTicker(topRow,    { pxPerSecond: 36, direction: "right" });
        makeTicker(bottomRow, { pxPerSecond: 36, direction: "left"  });
      });
    </script>

    <script>
      (function () {
        const track = document.getElementById('logoTrack');
        if (!track) return;
        const src = 'https://i.imgur.com/2SUo8mv.png';
        const COPIES = 12;
        for (let i = 0; i < COPIES; i++) {
          const img = document.createElement('img');
          img.src = src; img.alt = 'Powered-by logos'; img.className = 'logo-piece'; img.decoding = 'async';
          track.appendChild(img);
        }
        const SECONDS_PER_LOOP = 150;
        function run() {
          let x = 0, pieceW = 0, last = performance.now();
          function measure() {
            const first = track.querySelector('.logo-piece');
            if (!first || !first.complete) { setTimeout(measure, 50); return; }
            pieceW = first.getBoundingClientRect().width || first.naturalWidth;
          }
          function tick(now) {
            const dt = (now - last) / 1000; last = now;
            const pxPerSecond = (pieceW * COPIES) / SECONDS_PER_LOOP;
            x -= pxPerSecond * dt; const loop = pieceW * COPIES; if (x <= -loop) x += loop;
            track.style.transform = `translateX(${x}px)`; requestAnimationFrame(tick);
          }
          measure(); requestAnimationFrame(tick); window.addEventListener('resize', measure, { passive: true });
        }
        window.addEventListener('load', run);
      })();
    </script>

    <script>
      (function () {
        const bar = document.getElementById("topbarWrap");
        let lastY = window.scrollY, ticking = false;
        function onScroll() {
          const y = window.scrollY;
          if (y > lastY && y > 80) { bar.classList.add("hide"); } else { bar.classList.remove("hide"); }
          lastY = y <= 0 ? 0 : y; ticking = false;
        }
        window.addEventListener("scroll", () => { if (!ticking) { requestAnimationFrame(onScroll); ticking = true; } }, { passive: true });
      })();
    </script>

    <!-- REVIEWS SECTION -->
    <script>
      (function () {
        const track = document.getElementById("reviewsTrack");
        const prev = document.getElementById("revPrev");
        const next = document.getElementById("revNext");
        const prevMobile = document.getElementById("revPrevMobile");
        const nextMobile = document.getElementById("revNextMobile");
        const dotsEl = document.getElementById("reviewDots");
        const viewport = document.getElementById("reviewsViewport");

        const originals = Array.from(track.children);
        const TOTAL = originals.length;
        track.innerHTML = "";
        for (let k = 0; k < 3; k++) originals.forEach(n => track.appendChild(n.cloneNode(true)));

        let perPage = 3;
        function computePerPage() {
          const w = window.innerWidth;
          perPage = (w <= 640) ? 1 : (w <= 1100) ? 2 : 3;
        }
        computePerPage();

        let itemW = 0;
        function measure() {
          const c = track.querySelector(".review-card");
          const gap = parseFloat(getComputedStyle(track).gap || 24);
          itemW = (c ? c.getBoundingClientRect().width : 0) + gap;
        }
        measure();

        let baseIndex = TOTAL;
        function setTransform(i, animate) {
          if (!animate) track.style.transition = "none";
          track.style.transform = `translateX(${-i * itemW}px)`;
          if (!animate) { track.offsetHeight; track.style.transition = "transform .35s ease"; }
        }
        setTransform(baseIndex, false);

        const mod = (n,m) => ((n % m) + m) % m;
        const groupStarts = [0, 2];
        const toggleMode = () => (perPage === 3 && TOTAL === 5);

        function renderDots() {
          dotsEl.innerHTML = "";
          for (let i = 0; i < TOTAL; i++) {
            const b = document.createElement("button");
            b.type = "button"; b.className = "review-dot";
            b.addEventListener("click", () => {
              if (toggleMode()) {
                let g = (i < 2) ? 0 : (i > 2) ? 1 : (currentGroup() === 0 ? 0 : 1);
                goGroup(g);
              } else { goToStart(i); }
              restartAutoplay();
            });
            dotsEl.appendChild(b);
          }
          updateDots();
        }

        function currentGroup() { const p = mod(baseIndex, TOTAL); return (p === groupStarts[1]) ? 1 : 0; }
        function updateDots() {
          const g = toggleMode() ? currentGroup() : null;
          const children = [...dotsEl.children];
          if (toggleMode()) {
            const active = g === 0 ? new Set([0,1,2]) : new Set([2,3,4]);
            children.forEach((d, i) => d.classList.toggle("active", active.has(i)));
          } else {
            const start = mod(baseIndex, TOTAL);
            children.forEach((d, i) => { const k = (i - start + TOTAL) % TOTAL; d.classList.toggle("active", k < perPage); });
          }
        }

        function recenterIfNeeded() {
          if (baseIndex >= 2 * TOTAL) { baseIndex -= TOTAL; setTransform(baseIndex, false); }
          else if (baseIndex < TOTAL) { baseIndex += TOTAL; setTransform(baseIndex, false); }
        }

        function goDelta(delta) { baseIndex += delta; setTransform(baseIndex, true); track.addEventListener("transitionend", () => { recenterIfNeeded(); updateDots(); }, { once: true }); }
        function goGroup(g) { const p = mod(baseIndex, TOTAL); if (g === 0) { if (p === groupStarts[0]) return; goDelta(3); } else { if (p === groupStarts[1]) return; goDelta(2); } }
        function goPrevGroup() { const p = mod(baseIndex, TOTAL); baseIndex += (p === groupStarts[0]) ? -3 : -2; setTransform(baseIndex, true); track.addEventListener("transitionend", () => { recenterIfNeeded(); updateDots(); }, { once: true }); }
        function goToStart(dotIdx) { const p = mod(baseIndex, TOTAL); baseIndex = baseIndex + ((dotIdx - p + TOTAL) % TOTAL); setTransform(baseIndex, true); track.addEventListener("transitionend", () => { recenterIfNeeded(); updateDots(); }, { once: true }); }

        next?.addEventListener("click", () => { if (toggleMode()) goGroup(currentGroup() === 0 ? 1 : 0); else goDelta(perPage); restartAutoplay(); });
        prev?.addEventListener("click", () => { if (toggleMode()) goPrevGroup(); else goDelta(-perPage); restartAutoplay(); });
        nextMobile?.addEventListener('click', () => { if (toggleMode()) goGroup(currentGroup() === 0 ? 1 : 0); else goDelta(perPage); restartAutoplay(); });
        prevMobile?.addEventListener('click', () => { if (toggleMode()) goPrevGroup(); else goDelta(-perPage); restartAutoplay(); });

        let timer = null;
        function startAutoplay() { stopAutoplay(); timer = setInterval(() => { if (toggleMode()) goGroup(currentGroup() === 0 ? 1 : 0); else goDelta(perPage); }, 5000); }
        function stopAutoplay() { if (timer) clearInterval(timer); timer = null; }
        function restartAutoplay() { stopAutoplay(); startAutoplay(); }
        renderDots(); startAutoplay();

        function snap() { setTransform(baseIndex, false); updateDots(); }
        window.addEventListener("resize", () => { computePerPage(); measure(); snap(); }, { passive: true });
      })();
    </script>

    <script>
      (() => {
        const viewport = document.querySelector('.reviews-viewport');
        const track = document.getElementById('reviewsTrack');
        if (!viewport || !track) return;
        viewport.style.cursor = 'grab';
        let isDown = false, startX = 0, startTx = 0, moved = false;
        function getTx() { const m = getComputedStyle(track).transform; if (m && m !== 'none') { const p = m.replace('matrix(', '').replace(')', '').split(','); return parseFloat(p[4] || 0); } return 0; }
        function setTx(x) { track.style.transition = 'none'; track.style.transform = `translateX(${x}px)`; }
        function end() { isDown = false; viewport.style.cursor = 'grab'; track.offsetHeight; track.style.transition = 'transform .35s ease'; setTimeout(() => (moved = false), 0); }
        function start(clientX) { isDown = true; moved = false; startX = clientX; startTx = getTx(); viewport.style.cursor = 'grabbing'; }
        function move(clientX) { if (!isDown) return; const dx = clientX - startX; if (Math.abs(dx) > 3) moved = true; setTx(startTx + dx); }
        viewport.addEventListener('mousedown', e => { e.preventDefault(); start(e.clientX); });
        window.addEventListener('mousemove', e => move(e.clientX), { passive: true });
        window.addEventListener('mouseup', end);
        viewport.addEventListener('touchstart', e => start(e.touches[0].clientX), { passive: true });
        viewport.addEventListener('touchmove',  e => move(e.touches[0].clientX),   { passive: true });
        window.addEventListener('touchend', end);
        viewport.addEventListener('click', e => { if (moved) e.preventDefault(); }, true);
      })();
    </script>

    <script>
      document.querySelectorAll(".faq-item .faq-q").forEach((btn) => {
        btn.addEventListener("click", () => {
          const item = btn.parentElement;
          if (!item.classList.contains("open")) {
            document.querySelectorAll(".faq-item.open").forEach((i) => i.classList.remove("open"));
          }
          item.classList.toggle("open");
        });
      });
    </script>
    <script>document.querySelectorAll('.faq-item.open').forEach(i=>i.classList.remove('open'));</script>


    <script>
      const topbarWrap = document.getElementById('topbarWrap');
      const topbar = document.getElementById('topbar');
      const menuToggle = document.getElementById('menuToggle');
      const menuPanel  = document.getElementById('menuPanel');
      const menuOverlay= document.getElementById('menuOverlay');
      function positionPanel(){ const r = topbar.getBoundingClientRect(); menuPanel.style.top = (r.top + r.height + 0) + 'px'; }
      positionPanel(); window.addEventListener('resize', positionPanel);
      function openMenu(){ positionPanel(); menuPanel.classList.add('open'); menuOverlay.classList.add('show'); menuToggle.classList.add('open'); topbar.classList.add('merged'); }
      function closeMenu(){ menuPanel.classList.remove('open'); menuOverlay.classList.remove('show'); menuToggle.classList.remove('open'); topbar.classList.remove('merged'); }
      menuToggle.addEventListener('click', () => { if(menuPanel.classList.contains('open')) closeMenu(); else openMenu(); });
      menuOverlay.addEventListener('click', closeMenu);
      document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeMenu(); });
      window.addEventListener('scroll', () => { if (menuPanel.classList.contains('open')) closeMenu(); }, { passive:true });
    </script>

<script>
  (async () => {
    async function fileToPayload(file) {
      try {
        const name = file.name || "file";
        const mime = file.type || "application/octet-stream";
        const ext = name.toLowerCase();
        if (mime === "text/plain" || ext.endsWith(".txt")) {
          return { text: await file.text(), originalName: name, mime };
        }
        if (mime === "application/pdf" || ext.endsWith(".pdf")) {
          const buf = await file.arrayBuffer();
          const pdf = await pdfjsLib.getDocument({ data: buf }).promise;
          let full = "";
          for (let p = 1; p <= pdf.numPages; p++) {
            const page = await pdf.getPage(p);
            const content = await page.getTextContent();
            full += content.items.map((i) => i.str).join(" ") + "\n";
          }
          return { text: full, originalName: name, mime };
        }
        if (mime === "application/vnd.openxmlformats-officedocument.wordprocessingml.document" || ext.endsWith(".docx")) {
          const buf = await file.arrayBuffer();
          const res = await window.mammoth.extractRawText({ arrayBuffer: buf });
          return { text: res.value || "", originalName: name, mime };
        }
        if (mime.startsWith("image/") || /\.(png|jpe?g|webp)$/i.test(ext)) {
          const dataUrl = await new Promise((resolve) => {
            const r = new FileReader();
            r.onload = () => resolve(r.result);
            r.readAsDataURL(file);
          });
          return { imageDataURI: dataUrl, originalName: name, mime };
        }
        throw new Error("Unsupported file type: " + mime);
      } catch (e) {
        console.error("fileToPayload error:", e.message);
        throw e;
      }
    }

    const demoData = {
      contractName: "Uploaded Contract",
      detectedLang: "en",
      analysis: {
        summary: ["Contract appears standard with clear terms.", "Some clauses need review for fairness."],
        risk: 20,
        clarity: 85,
        compliance: 90,
        keyClauses: ["Payment: Net 30 days.", "Termination: 30-day notice."],
        potentialIssues: ["Ambiguous termination clause.", "Unclear penalty terms."],
        smartSuggestions: ["Clarify termination conditions.", "Cap penalties."]
      },
      translations: {}
    };

    const input = document.getElementById("contractFile");
    const inputCamera = document.getElementById("contractCamera");
    const roleUI = document.getElementById("rolePicker");
    const ctaBtn = document.getElementById("reviewBtn");
    let pickedFiles = [];

    function isMobile() {
      return window.matchMedia('(max-width: 980px)').matches;
    }

ctaBtn.addEventListener("click", (e) => {
  e.preventDefault();

  // ✅ DO NOT HIDE BUTTON YET
  // ✅ DO NOT SHOW ROLE PICKER YET

  pickedFiles = [];

  // ✅ ALWAYS show native iOS/Android sheet:
  input.value = "";
  input.click();
});



input.addEventListener("change", async () => {
  if (!input.files || !input.files.length) return;

  pickedFiles = Array.from(input.files);

  // ✅ NOW hide button
  ctaBtn.style.display = "none";

  // ✅ NOW show role picker
  roleUI.hidden = false;
});



inputCamera.addEventListener("change", async () => {
  if (!inputCamera.files || !inputCamera.files.length) return;

  pickedFiles = Array.from(inputCamera.files);

  // ✅ Detect real camera capture (1 image)
  const first = inputCamera.files[0];
  const usedCamera = inputCamera.files.length === 1 && first.type.startsWith("image/");

  if (usedCamera) {
    // ✅ Run your bottom sheet "Add More / Continue" flow
    setTimeout(() => {
      // This function already exists in your correct version
      handleCameraFlow();
    }, 200);
    return;
  }

  // ✅ Otherwise normal file selection
  ctaBtn.style.display = "none";
  roleUI.hidden = false;
});
// === CAMERA FLOW SYSTEM (FULL) ===


    roleUI.querySelectorAll('.role-btn').forEach(btn => {
      btn.addEventListener('click', async () => {
        roleUI.querySelectorAll('.role-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        if (!pickedFiles.length) {
          alert("Please choose a contract file first.");
          return;
        }
        try {
          const file = pickedFiles[0]; // Use first file
          if (file.size > 10_000_000) {
            alert(`File ${file.name} is too large. Maximum size is 10MB.`);
            return;
          }
          const payload = await fileToPayload(file);
        const payloadArr = await Promise.all(pickedFiles.map(fileToPayload));
const body = { 
  ...payloadArr[0], 
  role: btn.dataset.role || "signer" 
};


const resp = await fetch("/api/analyze", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify(body)
});

if (!resp.ok) {
  const err = await resp.json().catch(() => ({}));
  throw new Error(err?.error || "Analysis failed");
}

const analysisResult = await resp.json();
localStorage.setItem("analysisRaw", JSON.stringify(analysisResult));
window.location.href = "analysis.html";

        } catch (e) {
          alert(`Error processing file: ${e.message}`);
        }
      });
    });
  })();
</script>
   <!-- CAMERA FLOW BOTTOM SHEET -->
<div id="cameraSheet" style="
  position: fixed;
  left: 0; right: 0; bottom: -400px;
  background: #111;
  border-radius: 24px 24px 0 0;
  padding: 24px;
  box-shadow: 0 -6px 22px rgba(0,0,0,.6);
  transition: bottom .25s ease;
  color: white;
  z-index: 99999;
">
  <div id="cameraCount" style="
    font-size: 20px;
    margin-bottom: 18px;
    text-align: center;
  ">1/10 photos added</div>

  <button id="addMoreBtn" style="
    width: 100%;
    background: #adff00;
    color: black;
    padding: 14px;
    border-radius: 12px;
    border: none;
    font-size: 18px;
    margin-bottom: 12px;
  ">Add More</button>

  <button id="continueBtn" style="
    width: 100%;
    background: white;
    color: black;
    padding: 14px;
    border-radius: 12px;
    border: none;
    font-size: 18px;
  ">Continue</button>
</div>
<!-- iOS Bottom Sheet: Add More Photos -->
<div id="addMoreSheet" class="sheet-backdrop" style="display:none;">
  <div class="sheet-panel">
    <div class="sheet-title" id="sheetCount">1/10 photos added</div>
    <button class="sheet-btn sheet-yes" id="sheetAddMore">Add More</button>
    <button class="sheet-btn sheet-no" id="sheetContinue">Continue</button>
  </div>
</div>

<script>
(async () => {
  const input = document.getElementById("contractFile");
  const inputCamera = document.getElementById("contractCamera");
  const roleUI = document.getElementById("rolePicker");
  const ctaBtn = document.getElementById("reviewBtn");
  const sheet = document.getElementById("addMoreSheet");
  const sheetAddMore = document.getElementById("sheetAddMore");
  const sheetCont = document.getElementById("sheetContinue");
  const sheetCount = document.getElementById("sheetCount");
  let pickedFiles = [];
  let cameraResolve = null;

  function showSheet(count) {
    sheetCount.textContent = `${count}/10 photos added`;
    sheet.style.display = "flex";
  }
  function hideSheet() {
    sheet.style.display = "none";
  }

  sheetAddMore.onclick = () => {
    hideSheet();
    if (cameraResolve) cameraResolve(true);
  };
  sheetCont.onclick = () => {
    hideSheet();
    if (cameraResolve) cameraResolve(false);
  };

  async function handleCameraFlow() {
    let count = pickedFiles.length;
    while (count < 10) {
      if (count > 0) {
        const more = await new Promise(resolve => {
          cameraResolve = resolve;
          showSheet(count);
        });
        if (!more) break;
      }
      inputCamera.value = "";
      inputCamera.click();
      const newPhoto = await new Promise(resolve => {
        inputCamera.onchange = () => resolve(inputCamera.files?.[0] || null);
      });
      if (!newPhoto) break;
      pickedFiles.push(newPhoto);
      count++;
    }
    if (pickedFiles.length) {
      ctaBtn.style.display = "none";
      roleUI.hidden = false;
    }
  }

  input.addEventListener("change", () => {
    if (!input.files.length) return;
    const first = input.files[0];
    const fromCamera = inputCamera.capture === "environment";
    if (fromCamera && first.type.startsWith("image/")) {
      pickedFiles = [first];
      setTimeout(handleCameraFlow, 300);
      return;
    }
    pickedFiles = Array.from(input.files).slice(0, 10);
    ctaBtn.style.display = "none";
    roleUI.hidden = false;
  });

  window.handleCameraFlow = handleCameraFlow;
})();
</script>

<style>
.sheet-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.6);
  display: flex;
  align-items: flex-end;
  justify-content: center;
  z-index: 99999;
}
.sheet-panel {
  background: #1e1d23; /* ← panel background */
  color: white;
  width: 100%;
  max-width: 500px;
  border-radius: 24px 24px 0 0;
  padding: 24px;
  box-shadow: 0 -6px 22px rgba(0,0,0,.6);
}
.sheet-title {
  font-size: 20px;
  text-align: center;
  margin-bottom: 18px;
  color: #fff; /* ← white text */
}
.sheet-btn {
  width: 100%;
  padding: 14px;
  border: none;
  border-radius: 12px;
  font-size: 18px;
  margin-bottom: 12px;
  cursor: pointer;
  color: #fff; /* ← both buttons: white text */
  font-weight: 500;
}
.sheet-yes {
  background: #007aff; /* ← Add More button */
}
.sheet-no {
  background: #2c2b33; /* ← Continue button */
}
/* ✅ Raise only the role picker (without moving YouTube) */
@media (max-width: 980px) {
  #rolePicker {
    position: relative;
    transform: translateY(-40px); /* lift higher */
    z-index: 10;
  }

  /* Compensate spacing so YouTube doesn’t jump */
  .yt-wrap {
    margin-top: -20px; /* tighten the gap */
  }
}
@media (max-width: 980px) {
  /* move both down together by roughly their current gap */
  #rolePicker,
  .yt-wrap {
    position: relative;
    top: 40px; /* same as the existing distance between them */
  }
}
/* Move ONLY the Review Contract button down on mobile (no pushing content) */
@media (max-width: 980px) {
  #reviewBtn {
    position: relative !important;
    top: 28px !important;   /* increase number = lower */
  }
  .logo-strip {
    position: relative;
    top: 20px;     /* increase = moves DOWN, decrease = moves UP */
  }
}

